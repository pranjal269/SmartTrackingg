{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import apiClient from'../api/apiClient';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OtpVerification=()=>{const{shipmentId}=useParams();const[otp,setOtp]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const[loading,setLoading]=useState(false);const[generating,setGenerating]=useState(true);const[shipment,setShipment]=useState(null);const[user,setUser]=useState(null);const navigate=useNavigate();useEffect(()=>{// First, fetch shipment details\nfetchShipmentDetails();},[shipmentId]);const fetchShipmentDetails=async()=>{try{console.log(\"Fetching shipment details for shipmentId: \".concat(shipmentId));setError('');// First, fetch the shipment details\nconst response=await apiClient.get(\"/shipment/\".concat(shipmentId));console.log('Shipment data:',response.data);setShipment(response.data);// Then fetch the user details\ntry{const userResponse=await apiClient.get(\"/user/\".concat(response.data.userId));console.log('User data:',userResponse.data);setUser(userResponse.data);}catch(userErr){console.error('Error fetching user details:',userErr);// Continue even if user fetch fails\n}// Now generate the OTP\ngenerateOtp();}catch(err){var _err$response,_err$response$data;console.error('Error fetching shipment details:',err);setError('Failed to fetch shipment. Please try again. Error: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message));setGenerating(false);}};const generateOtp=async()=>{try{setGenerating(true);console.log(\"Generating OTP for shipmentId: \".concat(shipmentId));await apiClient.post(\"/shipment/otp/\".concat(shipmentId));setSuccess('OTP has been sent to your email and phone (if provided).');setError('');}catch(err){var _err$response2,_err$response2$data;console.error('Error generating OTP:',err);setError('Failed to generate OTP. Error: '+(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||err.message));}finally{setGenerating(false);}};const handleSubmit=async e=>{e.preventDefault();if(!otp||otp.length!==6){setError('Please enter a valid 6-digit OTP');return;}setError('');setSuccess('');setLoading(true);try{// Send OTP as JSON string\nawait apiClient.post(\"/shipment/otp/verify/\".concat(shipmentId),JSON.stringify(otp),{headers:{'Content-Type':'application/json'}});setSuccess('Delivery confirmed! Shipment marked as Delivered.');// Navigate back to dashboard after a delay\nsetTimeout(()=>{navigate('/dashboard');},2000);}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Invalid OTP. Please check and try again.');}finally{setLoading(false);}};const handleOtpChange=e=>{const value=e.target.value.replace(/\\D/g,'');// Only allow digits\nif(value.length<=6){setOtp(value);}};const handleRegenerateOtp=()=>{setOtp('');setError('');setSuccess('');generateOtp();};if(generating&&!error){return/*#__PURE__*/_jsx(\"div\",{className:\"modern-dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modern-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Generating OTP...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"modern-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-hero\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"OTP Verification\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Confirm delivery with one-time password\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"modern-btn secondary\",children:\"Back to Dashboard\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"modern-error\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\\uFE0F\"}),error]}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"success-message-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-icon\",children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"div\",{className:\"success-content\",children:/*#__PURE__*/_jsx(\"h3\",{children:success})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shipment-form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enter Delivery OTP\"}),/*#__PURE__*/_jsx(\"p\",{children:shipment?user!==null&&user!==void 0&&user.phoneNumber?\"OTP has been sent to your email (\".concat(user.email,\") and phone (\").concat(user.phoneNumber,\")\"):\"OTP has been sent to your email (\".concat((user===null||user===void 0?void 0:user.email)||'registered email',\")\"):'Delivery OTP verification'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"modern-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"otp\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-icon\",children:\"\\uD83D\\uDD10\"}),\"Delivery OTP Code\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"otp\",value:otp,onChange:handleOtpChange,placeholder:\"Enter 6-digit OTP\",maxLength:\"6\",className:\"otp-input modern-input\",style:{fontSize:'1.5rem',textAlign:'center',letterSpacing:'0.5rem',fontFamily:'monospace'},required:true}),/*#__PURE__*/_jsx(\"small\",{className:\"form-hint\",children:\"Enter the 6-digit code exactly as received\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||otp.length!==6||!shipment,className:\"modern-btn primary large\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn-spinner\"}),\"Verifying...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2705\"}),\"Verify Delivery\"]})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleRegenerateOtp,className:\"modern-btn secondary large\",disabled:generating||!shipment,children:generating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn-spinner\"}),\"Generating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDD04\"}),\"Resend OTP\"]})})]})]})]}),shipment&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCB Shipment Information\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-icon\",children:\"\\u2139\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-text\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Tracking ID: \",(shipment===null||shipment===void 0?void 0:shipment.trackingId)||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"For: \",(shipment===null||shipment===void 0?void 0:shipment.recipientName)||'Recipient']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-icon\",children:\"\\uD83D\\uDCF1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-text\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"OTP Delivery\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Check both your email and SMS (if phone number provided)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-icon\",children:\"\\u23F1\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-text\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Time Sensitive\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The OTP is valid for a limited time only\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-icon\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-text\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Need a new code?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Click \\\"Resend OTP\\\" to generate a fresh code\"})]})]})]})]})]})]});};export default OtpVerification;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","apiClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OtpVerification","shipmentId","otp","setOtp","error","setError","success","setSuccess","loading","setLoading","generating","setGenerating","shipment","setShipment","user","setUser","navigate","fetchShipmentDetails","console","log","concat","response","get","data","userResponse","userId","userErr","generateOtp","err","_err$response","_err$response$data","message","post","_err$response2","_err$response2$data","handleSubmit","e","preventDefault","length","JSON","stringify","headers","setTimeout","_err$response3","_err$response3$data","handleOtpChange","value","target","replace","handleRegenerateOtp","className","children","onClick","phoneNumber","email","onSubmit","htmlFor","type","id","onChange","placeholder","maxLength","style","fontSize","textAlign","letterSpacing","fontFamily","required","disabled","trackingId","recipientName"],"sources":["/Users/pranjalagarwal/Documents/smartTrackingfinal/SmartTrackingg/parcel-tracking-frontend/src/components/OtpVerification.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport apiClient from '../api/apiClient';\nimport './Dashboard.css';\n\nconst OtpVerification = () => {\n  const { shipmentId } = useParams();\n  const [otp, setOtp] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [generating, setGenerating] = useState(true);\n  const [shipment, setShipment] = useState(null);\n  const [user, setUser] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // First, fetch shipment details\n    fetchShipmentDetails();\n  }, [shipmentId]);\n\n  const fetchShipmentDetails = async () => {\n    try {\n      console.log(`Fetching shipment details for shipmentId: ${shipmentId}`);\n      setError('');\n      \n      // First, fetch the shipment details\n      const response = await apiClient.get(`/shipment/${shipmentId}`);\n      console.log('Shipment data:', response.data);\n      setShipment(response.data);\n      \n      // Then fetch the user details\n      try {\n        const userResponse = await apiClient.get(`/user/${response.data.userId}`);\n        console.log('User data:', userResponse.data);\n        setUser(userResponse.data);\n      } catch (userErr) {\n        console.error('Error fetching user details:', userErr);\n        // Continue even if user fetch fails\n      }\n      \n      // Now generate the OTP\n      generateOtp();\n    } catch (err) {\n      console.error('Error fetching shipment details:', err);\n      setError('Failed to fetch shipment. Please try again. Error: ' + (err.response?.data?.message || err.message));\n      setGenerating(false);\n    }\n  };\n\n  const generateOtp = async () => {\n    try {\n      setGenerating(true);\n      console.log(`Generating OTP for shipmentId: ${shipmentId}`);\n      await apiClient.post(`/shipment/otp/${shipmentId}`);\n      setSuccess('OTP has been sent to your email and phone (if provided).');\n      setError('');\n    } catch (err) {\n      console.error('Error generating OTP:', err);\n      setError('Failed to generate OTP. Error: ' + (err.response?.data?.message || err.message));\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!otp || otp.length !== 6) {\n      setError('Please enter a valid 6-digit OTP');\n      return;\n    }\n\n    setError('');\n    setSuccess('');\n    setLoading(true);\n\n    try {\n      // Send OTP as JSON string\n      await apiClient.post(`/shipment/otp/verify/${shipmentId}`, JSON.stringify(otp), {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      setSuccess('Delivery confirmed! Shipment marked as Delivered.');\n      \n      // Navigate back to dashboard after a delay\n      setTimeout(() => {\n        navigate('/dashboard');\n      }, 2000);\n    } catch (err) {\n      setError(err.response?.data?.message || 'Invalid OTP. Please check and try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOtpChange = (e) => {\n    const value = e.target.value.replace(/\\D/g, ''); // Only allow digits\n    if (value.length <= 6) {\n      setOtp(value);\n    }\n  };\n\n  const handleRegenerateOtp = () => {\n    setOtp('');\n    setError('');\n    setSuccess('');\n    generateOtp();\n  };\n\n  if (generating && !error) {\n    return (\n      <div className=\"modern-dashboard\">\n        <div className=\"loading-container\">\n          <div className=\"modern-spinner\"></div>\n          <p>Generating OTP...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"modern-dashboard\">\n      <div className=\"dashboard-hero\">\n        <div className=\"hero-content\">\n          <h1>OTP Verification</h1>\n          <p>Confirm delivery with one-time password</p>\n        </div>\n        <button \n          onClick={() => navigate('/dashboard')}\n          className=\"modern-btn secondary\"\n        >\n          Back to Dashboard\n        </button>\n      </div>\n\n      {error && <div className=\"modern-error\"><span>⚠️</span>{error}</div>}\n      {success && <div className=\"success-message-card\">\n        <div className=\"success-icon\">✅</div>\n        <div className=\"success-content\">\n          <h3>{success}</h3>\n        </div>\n      </div>}\n\n      <div className=\"shipment-form-container\">\n        <div className=\"form-card\">\n          <div className=\"form-header\">\n            <h2>Enter Delivery OTP</h2>\n            <p>\n              {shipment ? (\n                user?.phoneNumber \n                  ? `OTP has been sent to your email (${user.email}) and phone (${user.phoneNumber})` \n                  : `OTP has been sent to your email (${user?.email || 'registered email'})`\n              ) : (\n                'Delivery OTP verification'\n              )}\n            </p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"modern-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"otp\">\n                <span className=\"label-icon\">🔐</span>\n                Delivery OTP Code\n              </label>\n              <input\n                type=\"text\"\n                id=\"otp\"\n                value={otp}\n                onChange={handleOtpChange}\n                placeholder=\"Enter 6-digit OTP\"\n                maxLength=\"6\"\n                className=\"otp-input modern-input\"\n                style={{ \n                  fontSize: '1.5rem', \n                  textAlign: 'center', \n                  letterSpacing: '0.5rem',\n                  fontFamily: 'monospace'\n                }}\n                required\n              />\n              <small className=\"form-hint\">\n                Enter the 6-digit code exactly as received\n              </small>\n            </div>\n\n            <div className=\"form-actions\">\n              <button \n                type=\"submit\" \n                disabled={loading || otp.length !== 6 || !shipment}\n                className=\"modern-btn primary large\"\n              >\n                {loading ? (\n                  <>\n                    <div className=\"btn-spinner\"></div>\n                    Verifying...\n                  </>\n                ) : (\n                  <>\n                    <span>✅</span>\n                    Verify Delivery\n                  </>\n                )}\n              </button>\n              \n              <button \n                type=\"button\" \n                onClick={handleRegenerateOtp}\n                className=\"modern-btn secondary large\"\n                disabled={generating || !shipment}\n              >\n                {generating ? (\n                  <>\n                    <div className=\"btn-spinner\"></div>\n                    Generating...\n                  </>\n                ) : (\n                  <>\n                    <span>🔄</span>\n                    Resend OTP\n                  </>\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n\n        {shipment && (\n          <div className=\"info-card\">\n            <div className=\"info-header\">\n              <h3>📋 Shipment Information</h3>\n            </div>\n            <div className=\"info-content\">\n              <div className=\"info-step\">\n                <div className=\"step-icon\">ℹ️</div>\n                <div className=\"step-text\">\n                  <h4>Tracking ID: {shipment?.trackingId || 'N/A'}</h4>\n                  <p>For: {shipment?.recipientName || 'Recipient'}</p>\n                </div>\n              </div>\n              <div className=\"info-step\">\n                <div className=\"step-icon\">📱</div>\n                <div className=\"step-text\">\n                  <h4>OTP Delivery</h4>\n                  <p>Check both your email and SMS (if phone number provided)</p>\n                </div>\n              </div>\n              <div className=\"info-step\">\n                <div className=\"step-icon\">⏱️</div>\n                <div className=\"step-text\">\n                  <h4>Time Sensitive</h4>\n                  <p>The OTP is valid for a limited time only</p>\n                </div>\n              </div>\n              <div className=\"info-step\">\n                <div className=\"step-icon\">🔄</div>\n                <div className=\"step-text\">\n                  <h4>Need a new code?</h4>\n                  <p>Click \"Resend OTP\" to generate a fresh code</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OtpVerification; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}